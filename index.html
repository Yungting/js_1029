<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style type="text/css">
      html, body { height: 90%; margin: 0; padding: 0; }
      #map { height: 90%; }
    </style>
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>
  
  <select class="sel"></select>
  <select class="type"></select>
  <ul class="list"></ul>
  
  <div id= "map"></div>
  <script type="text/javascript">
     var sel = document.querySelector('.sel')
     var type = document.querySelector('.type')
     var list = document.querySelector('.list')
     var data =[
      {
        "編號": 1,
        "行政區": "鼓山區",
        "型式": "平面",
        "停車場名稱": "凹子底停車場",
        "停車場位置": "龍中段45地號土地（神農路、南屏路口）",
        "大型車車位": 12,
        "小型車車位": 192,
        "機車車位": 137,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "\"1.計時收費: (1)大型車每30分鐘收費30元(停車時數未滿30分鐘者，以30 分鐘計費)。(2)小型車每30分鐘收費15元(停車時數未滿30分鐘者，以30 分鐘計費)。 (3)機車不收費。2.月租收費:    (1)一般民眾：每月1,800元。    (2)龍子里里民：每月1,200元。\"",
        "營業時間": "08：00〜22：00",
        "客服電話": "",
        "緯度": "22.657409999999999",
        "經度": "120.29949999999999"
      },
      {
        "編號": 2,
        "行政區": "苓雅區",
        "型式": "建物平面",
        "停車場名稱": "英明停車場",
        "停車場位置": "林聖段一小段2017-4地號（英明路近英祥街口）",
        "大型車車位": 0,
        "小型車車位": 11,
        "機車車位": 42,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "小型車月租3000元、機車月租1500元",
        "營業時間": "24",
        "客服電話": "07-7230788、0932861332方先生",
        "緯度": "22.61689",
        "經度": "120.32488"
      },
      {
        "編號": 3,
        "行政區": "苓雅區",
        "型式": "建物立體",
        "停車場名稱": "阮綜合醫院停車場",
        "停車場位置": "苓洲段1567地號（四維四路107號）(立體停車塔)",
        "大型車車位": 0,
        "小型車車位": 208,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每小時50元",
        "營業時間": "24",
        "客服電話": "07-3390740江先生0927352558楊小姐",
        "緯度": "22.614952977913873",
        "經度": "120.29796020295634"
      },
      {
        "編號": 4,
        "行政區": "三民區",
        "型式": "建物立體",
        "停車場名稱": "紫龍城停車場",
        "停車場位置": "獅頭段一小段1689地號3層（陽明路169號）",
        "大型車車位": null,
        "小型車車位": 50,
        "機車車位": null,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每小時30元",
        "營業時間": "08:00〜22:00",
        "客服電話": "07-3870348",
        "緯度": "22.640709999999999",
        "經度": "120.34138"
      },
      {
        "編號": 5,
        "行政區": "苓雅區",
        "型式": "建物立體",
        "停車場名稱": "財團法人天主教聖功醫院附設地下室停車場",
        "停車場位置": "正明段350、350-1地號1-3層（建國一路352號）",
        "大型車車位": null,
        "小型車車位": 103,
        "機車車位": null,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每小時20元",
        "營業時間": "07:00〜22:00",
        "客服電話": "07-2238153",
        "緯度": "22.633780000000002",
        "經度": "120.32406"
      },
      {
        "編號": 6,
        "行政區": "前金區",
        "型式": "建物立體",
        "停車場名稱": "國賓大飯店停車場",
        "停車場位置": "後金段533、535地號（民生二路上近河東路）",
        "大型車車位": null,
        "小型車車位": 159,
        "機車車位": null,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每小時60元",
        "營業時間": "06:00〜01:00（翌日）",
        "客服電話": "2115211＃2266",
        "緯度": "22.624101710000001",
        "經度": "120.29092229"
      },
      {
        "編號": 7,
        "行政區": "左營區",
        "型式": "平面",
        "停車場名稱": "崇德停車場",
        "停車場位置": "新褔段七小段20地號（文康路、新莊仔路111巷54弄口）",
        "大型車車位": 0,
        "小型車車位": 38,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每月1,500元",
        "營業時間": "24",
        "客服電話": "2875598",
        "緯度": "22.673200000000001",
        "經度": "120.30336"
      },
      {
        "編號": 8,
        "行政區": "苓雅區",
        "型式": "建物立體",
        "停車場名稱": "潤成和平停車場",
        "停車場位置": "林德官段一小段1834地號（三多、和平一路1號）",
        "大型車車位": 0,
        "小型車車位": 49,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每半小時25元",
        "營業時間": "10:30〜22:30",
        "客服電話": "7229361、07-7229231*226",
        "緯度": "22.619859999999999",
        "經度": "120.32177"
      },
      {
        "編號": 9,
        "行政區": "前鎮區",
        "型式": "建物立體",
        "停車場名稱": "永昇國際企業股份有限公司民權停車場",
        "停車場位置": "光華段一小段2025地號（景德路1號）",
        "大型車車位": null,
        "小型車車位": 50,
        "機車車位": null,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每小時50元",
        "營業時間": "08：00〜22：00",
        "客服電話": "3319611＃113",
        "緯度": "22.6119170094385",
        "經度": "120.314556414103"
      },
      {
        "編號": 10,
        "行政區": "苓雅區",
        "型式": "平面",
        "停車場名稱": "武聖停車場",
        "停車場位置": "武聖段1121（使用面積1947.56㎡）、1122（使用面積359.34㎡）地號（武智街與武智街30巷口西北側）",
        "大型車車位": 0,
        "小型車車位": 72,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": 0,
        "收費標準": "每月1,500元",
        "營業時間": "24",
        "客服電話": "0952681415\t",
        "緯度": "22.62294545",
        "經度": "120.33502012"
      },
      {
        "編號": 11,
        "行政區": "左營區",
        "型式": "建物立體",
        "停車場名稱": "高雄巨蛋計時停車場",
        "停車場位置": "新博段36、37地號（博愛二路767、777號地下二、三層）(南屏路、新榮街)",
        "大型車車位": 0,
        "小型車車位": 1467,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每小時50元",
        "營業時間": "08:00~24:00",
        "客服電話": "07-556654(保安課劉股長)",
        "緯度": "22.66798",
        "經度": "120.30070000000001"
      },
      {
        "編號": 12,
        "行政區": "苓雅區",
        "型式": "平面",
        "停車場名稱": "苓西停車場",
        "停車場位置": "5苓西段77、77-1地號(華新街74號旁;近成功一路 )",
        "大型車車位": 0,
        "小型車車位": 23,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每月租金1,500元",
        "營業時間": "24",
        "客服電話": "0912983773吳先生",
        "緯度": "22.6141173330372",
        "經度": "120.297203243266"
      },
      {
        "編號": 13,
        "行政區": "三民區",
        "型式": "建物平面",
        "停車場名稱": "高雄市立中山網球場停車場",
        "停車場位置": "大港段3394及3393-7地號（平等路12號）",
        "大型車車位": 0,
        "小型車車位": 51,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每半小時15元(當日最高收費上限300元）。月租收費:每月3,000元。",
        "營業時間": "24",
        "客服電話": "07-7229449*612王先生",
        "緯度": "22.642643450000001",
        "經度": "120.32139912"
      },
      {
        "編號": 14,
        "行政區": "鹽埕區",
        "型式": "建物平面",
        "停車場名稱": "高雄市立鹽埕活動中心停車場",
        "停車場位置": "大智段104、105、107、108、133及134-1地號（大仁路2-1號）",
        "大型車車位": 0,
        "小型車車位": 10,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每小時30元",
        "營業時間": "24",
        "客服電話": "07-7229449*612黃先生0987471586李先生",
        "緯度": "22.624415530711001",
        "經度": "120.287141695777"
      },
      {
        "編號": 15,
        "行政區": "前金區",
        "型式": "建物立體",
        "停車場名稱": "新漢來集團停車場",
        "停車場位置": "成功一路266號地下4至7樓（成功一路、新田路口）",
        "大型車車位": 0,
        "小型車車位": 744,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每小時70元、每月3,000元",
        "營業時間": "24",
        "客服電話": "2157266",
        "緯度": "22.619333999999998",
        "經度": "120.29603299999999"
      },
      {
        "編號": 16,
        "行政區": "三民區",
        "型式": "平面",
        "停車場名稱": "大豐停車場",
        "停車場位置": "灣子內段寶珠溝小段767、767-1、767-2、767-3地號（大豐二路、春陽街口）",
        "大型車車位": 0,
        "小型車車位": 47,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每月1,000元",
        "營業時間": "08:00〜24:00",
        "客服電話": "3813353",
        "緯度": "22.64602987",
        "經度": "120.32962546"
      },
      {
        "編號": 17,
        "行政區": "三民區",
        "型式": "平面",
        "停車場名稱": "正忠停車場",
        "停車場位置": "灣子內段寶珠溝小段763、763-1、763-2、766、766-1地號（正忠路、春陽街口）",
        "大型車車位": 0,
        "小型車車位": 69,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每小時30元、每月1,000元",
        "營業時間": "08:00〜24:00",
        "客服電話": "3813353",
        "緯度": "22.646613611306101",
        "經度": "120.330036162482"
      },
      {
        "編號": 18,
        "行政區": "苓雅區",
        "型式": "建物平面",
        "停車場名稱": "高雄市立國際游泳池停車場",
        "停車場位置": "中正段7、8、11、13至17地號（中正一路94巷1號）",
        "大型車車位": 0,
        "小型車車位": 96,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每半小時15元(當日最高收費上限300元）。月租收費:每月3,000元",
        "營業時間": "24",
        "客服電話": "07-7229449*612王先生",
        "緯度": "22.62735",
        "經度": "120.33526000000001"
      },
      {
        "編號": 19,
        "行政區": "前鎮區",
        "型式": "建物平面",
        "停車場名稱": "高雄市立勞工壘球場停車場",
        "停車場位置": "愛群段1024、1025、1028、1029、1030及1036地號（民權二路上近中山三路口）",
        "大型車車位": 0,
        "小型車車位": 26,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每半小時15元（當日最高收費上限300元）、月租收費：每月3,000元。",
        "營業時間": "24",
        "客服電話": "07-7229449*612王先生",
        "緯度": "22.607790000000001",
        "經度": "120.30911999999999"
      },
      {
        "編號": 20,
        "行政區": "三民區",
        "型式": "平面",
        "停車場名稱": "萬年達灣愛街停車場",
        "停車場位置": "灣和段32、33地號（灣愛街1號前）",
        "大型車車位": 0,
        "小型車車位": 79,
        "機車車位": 0,
        "孕婦及育有六歲以下兒童者停車位": null,
        "收費標準": "每月2,500元",
        "營業時間": "24",
        "客服電話": "07-3474949、07-7229361",
        "緯度": "22.659319220512501",
        "經度": "120.320826618279"
      }
     ]
     
     //列出所有行政區
     var all_zip = {}
     for(var k=0; k<data.length;k++){
       var zip = data[k].行政區
       if(all_zip[zip] == undefined){
          all_zip[zip] = 1
        }else{
          all_zip[zip] += 1
        }
     }
    var str3 = ''
    for(var item3 in all_zip){
      str3 += "<option value='"+item3+"'>"+item3+"</option>"
    }
    sel.innerHTML = "<option value='all_zip'>請選擇</option>"+str3
    
     //列出所有形式
     var all_type = {}
     for(var x=0; x<data.length;x++){
       var type_ = data[x].型式
       if(all_type[type_] == undefined){
          all_type[type_] = 1
        }else{
          all_type[type_] += 1
        }
     }
    var str4 = ''
    for(var item4 in all_type){
      str4 += "<option value='"+item4+"'>"+item4+"</option>"
    }
    type.innerHTML = "<option value='all_type'>請選擇</option>"+str4
    
     //地圖
     function initMap() {
  
          //設定中心點座標
          var map = new google.maps.Map(document.getElementById('map'), {
              zoom: 13,
              center: {lat: 22.6048695, lng: 120.299119}
          })
       
          //顯示list
          sel.addEventListener('change',function(e){
              var _sel = sel.value
              var _type = type.value
              var str_name = ""
              
              var str ={}
              var place = {}
            
              for(var i=0;i<data.length;i++){
                if(data[i].行政區 == _sel && data[i].型式 == _type){
                  str_name += "<li>"+_sel+" - "+data[i].停車場名稱+"</li>"
                  
                  //跑迴圈依序將值塞入到 marker
                  place.lat = parseFloat(data[i].緯度)
                  place.lng = parseFloat(data[i].經度)

                  str.map = map;
                  str.title= data[i].型式
                  str.position = place
                }
              }
              list.innerHTML = str_name
              new google.maps.Marker(str)
          })
       
       
          type.addEventListener('change',function(e){
              var _sel = sel.value
              var _type = type.value
              var str_name = ""

              var str ={};
              var place = {};

              for(var i=0;i<data.length;i++){
                if(data[i].行政區 == _sel && data[i].型式 == _type){
                  str_name += "<li>"+_sel+" - "+data[i].停車場名稱+"</li>"

                  //跑迴圈依序將值塞入到 marker
                  place.lat = parseFloat(data[i].緯度)
                  place.lng = parseFloat(data[i].經度)
                  
                  str.map = map
                  str.title= data[i].停車場名稱
                  str.position = place
                  new google.maps.Marker(str)
                }
              }
              list.innerHTML = str_name
          })
       
     }
    
    

  </script>
  
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDy7niYo3hKVoLoxDPCbZqRZWG_x7jml4k&callback=initMap">
    </script>
  
</body>
</html>